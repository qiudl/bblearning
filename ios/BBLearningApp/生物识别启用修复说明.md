# ç”Ÿç‰©è¯†åˆ«å¯ç”¨åŠŸèƒ½ä¿®å¤è¯´æ˜

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

**é—®é¢˜**: ç‚¹å‡»"å¯ç”¨"ç”Ÿç‰©è¯†åˆ«ç™»å½•æŒ‰é’®æ²¡æœ‰ååº”

**åŸå› åˆ†æ**:
1. ä¹‹å‰çš„å®ç°åªæ˜¯ç®€å•è®¾ç½®äº†ä¸€ä¸ªæ ‡å¿—ä½
2. æ²¡æœ‰å®é™…ä¿å­˜ç”¨æˆ·å‡­è¯ï¼ˆç”¨æˆ·åï¼‰
3. æ²¡æœ‰è¿›è¡Œç”Ÿç‰©è¯†åˆ«éªŒè¯ç¡®è®¤

**ä¿®å¤å†…å®¹**:
1. âœ… æ·»åŠ `enableBiometric()`å‡½æ•°ï¼Œåœ¨å¯ç”¨æ—¶è¿›è¡ŒFace IDéªŒè¯
2. âœ… ä¿å­˜ç”¨æˆ·ååˆ°UserDefaultsï¼Œä»¥ä¾¿ä¸‹æ¬¡ç”Ÿç‰©è¯†åˆ«ç™»å½•ä½¿ç”¨
3. âœ… åœ¨ç”Ÿç‰©è¯†åˆ«ç™»å½•æ—¶è¯»å–ä¿å­˜çš„ç”¨æˆ·å
4. âœ… æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•

## ğŸ“ æ–°çš„å·¥ä½œæµç¨‹

### é¦–æ¬¡ç™»å½•å¹¶å¯ç”¨ç”Ÿç‰©è¯†åˆ«

1. **è¾“å…¥è´¦å·å¯†ç ç™»å½•**
   - ç”¨æˆ·åï¼šbeibei
   - å¯†ç ï¼š20111025~
   - ç‚¹å‡»"ç™»å½•"

2. **å¼¹å‡ºå¯ç”¨æç¤º**
   ```
   å¯ç”¨ç”Ÿç‰©è¯†åˆ«ç™»å½•
   ä½¿ç”¨Face IDå¿«é€Ÿç™»å½•

   [å¯ç”¨]  [æš‚ä¸å¯ç”¨]
   ```

3. **ç‚¹å‡»"å¯ç”¨"æŒ‰é’®**
   - ä¼šå¼¹å‡ºFace IDéªŒè¯ç•Œé¢
   - æç¤ºï¼š"éªŒè¯æ‚¨çš„èº«ä»½ä»¥å¯ç”¨Face IDå¿«é€Ÿç™»å½•"
   - å®ŒæˆFace IDéªŒè¯

4. **å¯ç”¨æˆåŠŸ**
   - æ§åˆ¶å°è¾“å‡ºï¼š
     ```
     ğŸ” [å¯ç”¨ç”Ÿç‰©è¯†åˆ«] å¼€å§‹éªŒè¯...
     âœ… ç”Ÿç‰©è¯†åˆ«å·²å¯ç”¨
        - ç”¨æˆ·å: beibei
        - ç±»å‹: Face ID
     ```
   - Alertè‡ªåŠ¨å…³é—­
   - ç™»å½•æˆåŠŸè¿›å…¥é¦–é¡µ

### ä¸‹æ¬¡ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«å¿«é€Ÿç™»å½•

1. **æ‰“å¼€åº”ç”¨**
   - çœ‹åˆ°è“ç´«æ¸å˜çš„å¿«é€Ÿç™»å½•æŒ‰é’®
   ```
   å¿«é€Ÿç™»å½•
   ä½¿ç”¨Face ID
   ```

2. **ç‚¹å‡»å¿«é€Ÿç™»å½•æŒ‰é’®**
   - å¼¹å‡ºFace IDéªŒè¯
   - æç¤ºï¼š"ä½¿ç”¨Face IDå¿«é€Ÿç™»å½•"

3. **å®ŒæˆéªŒè¯**
   - æ§åˆ¶å°è¾“å‡ºï¼š
     ```
     âœ… ç”Ÿç‰©è¯†åˆ«è®¤è¯æˆåŠŸ
     ğŸ“± ä½¿ç”¨ä¿å­˜çš„ç”¨æˆ·å: beibei
     ```
   - è‡ªåŠ¨ç™»å½•è¿›å…¥é¦–é¡µ

## ğŸš€ å®‰è£…æ›´æ–°

### æ–¹æ³•1ï¼šä½¿ç”¨Xcodeï¼ˆæ¨èï¼‰

1. **ç¡®ä¿è®¾å¤‡å‡†å¤‡å¥½**
   ```bash
   # æ£€æŸ¥è®¾å¤‡è¿æ¥
   xcrun devicectl list devices

   # åº”è¯¥çœ‹åˆ°è®¾å¤‡çŠ¶æ€ä¸º "available"ï¼ˆä¸æ˜¯ "unavailable"ï¼‰
   ```

2. **åœ¨Xcodeä¸­å®‰è£…**
   ```bash
   # æ‰“å¼€é¡¹ç›®
   open /Users/johnqiu/coding/www/projects/bblearning/ios/BBLearningApp/BBLearningApp.xcodeproj

   # åœ¨Xcodeä¸­ï¼š
   # 1. é€‰æ‹©çœŸæœºè®¾å¤‡ "éƒ­æ¢…æ¢…çš„iPhone"
   # 2. Product > Run (âŒ˜R)
   ```

### æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

1. **ç¡®ä¿è®¾å¤‡å¯ç”¨**
   - iPhoneå·²è§£é”
   - å·²ç‚¹å‡»"ä¿¡ä»»æ­¤ç”µè„‘"
   - USBè¿æ¥ç¨³å®š

2. **å®‰è£…åº”ç”¨**
   ```bash
   # æŸ¥æ‰¾æœ€æ–°çš„appåŒ…
   APP_PATH=$(find ~/Library/Developer/Xcode/DerivedData -name "BBLearningApp.app" -type d | grep Debug-iphoneos | head -1)

   # è·å–è®¾å¤‡ID
   DEVICE_ID=$(xcrun devicectl list devices | grep "éƒ­æ¢…æ¢…" | awk '{print $3}')

   # å®‰è£…
   xcrun devicectl device install app --device "$DEVICE_ID" "$APP_PATH"
   ```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1ï¼šé¦–æ¬¡å¯ç”¨

1. å¦‚æœä¹‹å‰å·²ç»å¯ç”¨è¿‡ï¼Œå…ˆæ¸…é™¤æ•°æ®ï¼š
   ```bash
   # åœ¨iPhoneä¸Šåˆ é™¤åº”ç”¨ï¼ˆé•¿æŒ‰å›¾æ ‡ > åˆ é™¤Appï¼‰
   # æˆ–åœ¨Xcodeä¸­ï¼šWindow > Devices and Simulators > é€‰æ‹©è®¾å¤‡ > Installed Apps > åˆ é™¤BBLearningApp
   ```

2. é‡æ–°å®‰è£…åº”ç”¨

3. æ‰“å¼€åº”ç”¨ï¼Œåº”è¯¥çœ‹åˆ°è“è‰²æç¤ºæ¡†ï¼ˆè€Œä¸æ˜¯å¿«é€Ÿç™»å½•æŒ‰é’®ï¼‰

4. è¾“å…¥beibei/20111025~ç™»å½•

5. çœ‹åˆ°å¯ç”¨æç¤ºï¼Œç‚¹å‡»"å¯ç”¨"

6. **é¢„æœŸè¡Œä¸º**ï¼š
   - å¼¹å‡ºFace IDéªŒè¯ç•Œé¢
   - å®ŒæˆéªŒè¯åï¼Œalertå…³é—­
   - è¿›å…¥é¦–é¡µ

7. æŸ¥çœ‹Xcodeæ§åˆ¶å°æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸ” [å¯ç”¨ç”Ÿç‰©è¯†åˆ«] å¼€å§‹éªŒè¯...
   âœ… ç”Ÿç‰©è¯†åˆ«å·²å¯ç”¨
      - ç”¨æˆ·å: beibei
      - ç±»å‹: Face ID
   ```

### æµ‹è¯•2ï¼šä½¿ç”¨ç”Ÿç‰©è¯†åˆ«å¿«é€Ÿç™»å½•

1. åœ¨é¦–é¡µé€€å‡ºç™»å½•

2. è¿”å›ç™»å½•é¡µé¢ï¼Œåº”è¯¥çœ‹åˆ°è“ç´«æ¸å˜æŒ‰é’®

3. ç‚¹å‡»å¿«é€Ÿç™»å½•æŒ‰é’®

4. **é¢„æœŸè¡Œä¸º**ï¼š
   - å¼¹å‡ºFace IDéªŒè¯
   - éªŒè¯æˆåŠŸåç›´æ¥è¿›å…¥é¦–é¡µ

5. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š
   ```
   âœ… ç”Ÿç‰©è¯†åˆ«è®¤è¯æˆåŠŸ
   ğŸ“± ä½¿ç”¨ä¿å­˜çš„ç”¨æˆ·å: beibei
   ```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šç‚¹å‡»"å¯ç”¨"åæ²¡æœ‰å¼¹å‡ºFace ID

**å¯èƒ½åŸå› **ï¼š
- Face IDåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æœªå¯ç”¨
- æœªå½•å…¥Face IDæ•°æ®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€iPhoneè®¾ç½®
2. Face IDä¸å¯†ç 
3. ç¡®ä¿å·²è®¾ç½®Face ID

### é—®é¢˜2ï¼šFace IDéªŒè¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿å…‰çº¿å……è¶³
2. æ­£é¢çœ‹å‘iPhone
3. é‡æ–°å½•å…¥Face ID

### é—®é¢˜3ï¼šå¯ç”¨åä»ç„¶çœ‹ä¸åˆ°å¿«é€Ÿç™»å½•æŒ‰é’®

**æ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹ä¿å­˜çš„æ•°æ®
defaults read com.bblearning.app
```

**æ‰‹åŠ¨æ¸…é™¤**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
```bash
defaults delete com.bblearning.app biometric_enabled
defaults delete com.bblearning.app biometric_username
```

### é—®é¢˜4ï¼šè®¾å¤‡unavailableæ— æ³•å®‰è£…

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é‡æ–°æ’æ‹”USBçº¿
2. é‡å¯iPhone
3. é‡å¯Xcode
4. åœ¨iPhoneä¸Šï¼šè®¾ç½® > é€šç”¨ > è®¾å¤‡ç®¡ç† > ä¿¡ä»»å¼€å‘è€…

## ğŸ“Š ä»£ç å˜æ›´å¯¹æ¯”

### ä¹‹å‰ï¼ˆæœ‰é—®é¢˜çš„ä»£ç ï¼‰
```swift
Button("å¯ç”¨") {
    isBiometricEnabled = true
    UserDefaults.standard.set(true, forKey: "biometric_enabled")
    print("âœ… ç”Ÿç‰©è¯†åˆ«å·²å¯ç”¨")
}
```

**é—®é¢˜**ï¼š
- âŒ æ²¡æœ‰ä¿å­˜ç”¨æˆ·å
- âŒ æ²¡æœ‰è¿›è¡ŒFace IDéªŒè¯
- âŒ ä¸‹æ¬¡æ— æ³•ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«ç™»å½•

### ç°åœ¨ï¼ˆä¿®å¤åçš„ä»£ç ï¼‰
```swift
Button("å¯ç”¨") {
    enableBiometric()
}

private func enableBiometric() {
    let context = LAContext()
    context.evaluatePolicy(
        .deviceOwnerAuthenticationWithBiometrics,
        localizedReason: "éªŒè¯æ‚¨çš„èº«ä»½ä»¥å¯ç”¨Face IDå¿«é€Ÿç™»å½•"
    ) { success, error in
        DispatchQueue.main.async {
            if success {
                // âœ… ä¿å­˜å¯ç”¨æ ‡å¿—å’Œç”¨æˆ·å
                UserDefaults.standard.set(true, forKey: "biometric_enabled")
                UserDefaults.standard.set(self.username, forKey: "biometric_username")

                self.isBiometricEnabled = true
                self.showBiometricEnablePrompt = false

                print("âœ… ç”Ÿç‰©è¯†åˆ«å·²å¯ç”¨")
                print("   - ç”¨æˆ·å: \(self.username)")
            }
        }
    }
}
```

**æ”¹è¿›**ï¼š
- âœ… ä¿å­˜ç”¨æˆ·åä»¥ä¾¿ä¸‹æ¬¡ç™»å½•
- âœ… è¿›è¡ŒFace IDéªŒè¯ç¡®è®¤ç”¨æˆ·æ„å›¾
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- âœ… æ­£ç¡®çš„é”™è¯¯å¤„ç†

## ğŸ“¦ æ–‡ä»¶ä½ç½®

- **ä¿®æ”¹æ–‡ä»¶**: `BBLearningApp/ContentView.swift`
- **ä¿®æ”¹è¡Œæ•°**: 205-354
- **ç¼–è¯‘çŠ¶æ€**: âœ… BUILD SUCCEEDED
- **AppåŒ…ä½ç½®**: `~/Library/Developer/Xcode/DerivedData/BBLearningApp-.../Build/Products/Debug-iphoneos/BBLearningApp.app`

---

**æ›´æ–°æ—¶é—´**: 2025-10-15 15:28
**ä¿®å¤ç‰ˆæœ¬**: v1.0.1
**çŠ¶æ€**: å·²ç¼–è¯‘ï¼Œå¾…å®‰è£…æµ‹è¯•
