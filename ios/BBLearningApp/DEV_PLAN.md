# BBLearning iOS 开发计划

**项目ID**: 153  
**项目名称**: BBLearning Web to iOS 功能迁移  
**开始日期**: 2025-10-15  
**预计完成**: 2025-11-30 (6周)  
**负责人**: 开发团队  
**UI设计**: 基于当前已实现的 SwiftUI 设计

---

## 📋 项目概述

将 BBLearning Web 前端的完整功能平移到 iOS 原生应用，使用 SwiftUI 框架，保持与 Web 版功能对等，提供更好的移动端用户体验。

---

## 🎯 项目目标

1. ✅ 100% 功能覆盖 Web 版所有核心功能
2. ✅ 原生 iOS 体验，性能优于 Web 版
3. ✅ 离线功能支持（练习记录、错题本）
4. ✅ 通知推送（学习提醒、AI 回复）
5. ✅ 数据同步（Web 和 iOS 数据互通）

---

## 📱 功能模块规划

### Phase 1: 核心基础设施 (Week 1-2)

#### 1.1 网络层架构
- [ ] **任务 1.1.1**: 实现 APIClient 基础框架
  - 使用 Alamofire 进行网络请求
  - 统一的请求/响应处理
  - 错误处理机制
  - Token 管理和自动刷新
  - **预计时间**: 2天
  
- [ ] **任务 1.1.2**: 配置 API Endpoints
  - 定义所有 API 端点
  - 环境配置管理（开发/生产）
  - API 版本控制
  - **预计时间**: 1天

- [ ] **任务 1.1.3**: 请求拦截器实现
  - Token 自动注入
  - 请求日志记录
  - 网络状态检测
  - **预计时间**: 1天

#### 1.2 数据持久化
- [ ] **任务 1.2.1**: Realm 数据库集成
  - 数据库模型定义
  - 迁移策略
  - 查询优化
  - **预计时间**: 2天

- [ ] **任务 1.2.2**: Keychain 安全存储
  - Token 安全存储
  - 用户凭证管理
  - 生物识别集成准备
  - **预计时间**: 1天

- [ ] **任务 1.2.3**: UserDefaults 配置管理
  - 应用设置存储
  - 用户偏好管理
  - 缓存策略
  - **预计时间**: 0.5天

#### 1.3 依赖注入容器
- [ ] **任务 1.3.1**: Swinject DI 配置
  - Repository 注册
  - UseCase 注册
  - ViewModel 注册
  - **预计时间**: 1天

- [ ] **任务 1.3.2**: 依赖关系图谱
  - 文档化依赖关系
  - 单元测试准备
  - **预计时间**: 0.5天

---

### Phase 2: 用户认证模块 (Week 2)

#### 2.1 登录功能
- [ ] **任务 2.1.1**: 登录界面完善
  - ✅ UI 已完成（当前版本）
  - 表单验证逻辑
  - 错误提示优化
  - **预计时间**: 1天

- [ ] **任务 2.1.2**: 登录 API 集成
  - 登录请求实现
  - Token 存储
  - 用户信息缓存
  - **预计时间**: 1天

- [ ] **任务 2.1.3**: 自动登录实现
  - Token 有效性验证
  - 自动跳转逻辑
  - 登录状态管理
  - **预计时间**: 0.5天

#### 2.2 注册功能
- [ ] **任务 2.2.1**: 注册界面开发
  - UI 设计实现
  - 表单验证
  - 密码强度检测
  - **预计时间**: 1天

- [ ] **任务 2.2.2**: 注册 API 集成
  - 注册请求实现
  - 验证码处理
  - 注册成功后自动登录
  - **预计时间**: 1天

#### 2.3 密码管理
- [ ] **任务 2.3.1**: 忘记密码功能
  - 重置密码界面
  - 验证码发送/验证
  - 密码重置 API
  - **预计时间**: 1.5天

- [ ] **任务 2.3.2**: 修改密码功能
  - 修改密码界面
  - 旧密码验证
  - 新密码更新
  - **预计时间**: 1天

---

### Phase 3: 首页模块 (Week 3)

#### 3.1 首页核心功能
- [ ] **任务 3.1.1**: 首页数据接口对接
  - ✅ UI 已完成（当前版本）
  - 获取学习概览数据
  - 推荐内容获取
  - 最近学习记录
  - **预计时间**: 1天

- [ ] **任务 3.1.2**: 快速操作卡片交互
  - 点击跳转逻辑
  - 动画效果
  - 状态更新
  - **预计时间**: 1天

- [ ] **任务 3.1.3**: 学习进度展示
  - 进度条实现
  - 数据可视化
  - 实时更新
  - **预计时间**: 1.5天

#### 3.2 横幅和推荐
- [ ] **任务 3.2.1**: 轮播横幅实现
  - 图片轮播组件
  - 自动播放
  - 点击跳转
  - **预计时间**: 1天

- [ ] **任务 3.2.2**: 智能推荐算法
  - 推荐内容展示
  - 个性化推荐
  - 推荐反馈收集
  - **预计时间**: 1.5天

---

### Phase 4: 知识点模块 (Week 3-4)

#### 4.1 知识点树形结构
- [ ] **任务 4.1.1**: 知识点树形展示
  - ✅ 基础 UI 已完成
  - 树形数据加载
  - 展开/收起动画
  - 层级导航
  - **预计时间**: 2天

- [ ] **任务 4.1.2**: 知识点搜索功能
  - 搜索界面
  - 实时搜索
  - 搜索历史
  - **预计时间**: 1.5天

- [ ] **任务 4.1.3**: 知识点收藏功能
  - 收藏/取消收藏
  - 收藏列表展示
  - 同步到服务器
  - **预计时间**: 1天

#### 4.2 知识点详情
- [ ] **任务 4.2.1**: 知识点详情页面
  - 内容展示（支持富文本）
  - 图片/视频支持
  - 公式渲染（LaTeX）
  - **预计时间**: 2天

- [ ] **任务 4.2.2**: 相关练习题推荐
  - 关联题目展示
  - 快速开始练习
  - 练习记录关联
  - **预计时间**: 1天

- [ ] **任务 4.2.3**: 学习笔记功能
  - 笔记编辑器
  - 笔记保存/同步
  - 笔记列表查看
  - **预计时间**: 2天

---

### Phase 5: 练习模块 (Week 4-5)

#### 5.1 练习模式
- [ ] **任务 5.1.1**: 随机练习模式
  - ✅ 入口 UI 已完成
  - 题目随机抽取
  - 难度选择
  - 练习记录
  - **预计时间**: 2天

- [ ] **任务 5.1.2**: 专项练习模式
  - 知识点选择
  - 题目筛选
  - 练习进度跟踪
  - **预计时间**: 2天

- [ ] **任务 5.1.3**: 模拟考试模式
  - 时间限制
  - 完整性检查
  - 成绩评估
  - **预计时间**: 2.5天

#### 5.2 答题界面
- [ ] **任务 5.2.1**: 题目展示组件
  - 题干渲染（富文本、公式）
  - 图片展示
  - 选项布局
  - **预计时间**: 2天

- [ ] **任务 5.2.2**: 答题交互
  - 选项选择
  - 答案提交
  - 答题计时
  - **预计时间**: 1.5天

- [ ] **任务 5.2.3**: 答案解析展示
  - 正确答案显示
  - 详细解析
  - 知识点链接
  - **预计时间**: 1.5天

#### 5.3 练习结果
- [ ] **任务 5.3.1**: 练习结果页面
  - 得分展示
  - 正确率统计
  - 错题列表
  - **预计时间**: 1.5天

- [ ] **任务 5.3.2**: 错题本自动收录
  - 错题自动保存
  - 错题分类
  - 重做功能
  - **预计时间**: 1.5天

- [ ] **任务 5.3.3**: 练习报告生成
  - 图表展示
  - 薄弱知识点分析
  - 学习建议
  - **预计时间**: 2天

---

### Phase 6: AI 辅导模块 (Week 5)

#### 6.1 AI 聊天功能
- [ ] **任务 6.1.1**: 聊天界面优化
  - ✅ 基础 UI 已完成
  - 消息气泡样式优化
  - 滚动性能优化
  - **预计时间**: 1天

- [ ] **任务 6.1.2**: AI 对话 API 集成
  - WebSocket 连接
  - 流式响应处理
  - 断线重连机制
  - **预计时间**: 2天

- [ ] **任务 6.1.3**: 消息类型支持
  - 文本消息
  - 图片消息（拍照识题）
  - 语音消息（语音输入）
  - **预计时间**: 2.5天

#### 6.2 拍照识题
- [ ] **任务 6.2.1**: 相机集成
  - 拍照功能
  - 相册选择
  - 图片裁剪
  - **预计时间**: 1.5天

- [ ] **任务 6.2.2**: 图片识别 API
  - 图片上传
  - OCR 识别
  - 结果展示
  - **预计时间**: 1.5天

- [ ] **任务 6.2.3**: 识题结果处理
  - 题目信息提取
  - AI 解答生成
  - 收藏到错题本
  - **预计时间**: 1天

#### 6.3 语音交互
- [ ] **任务 6.3.1**: 语音录制
  - 语音权限申请
  - 录音功能
  - 音频播放
  - **预计时间**: 1.5天

- [ ] **任务 6.3.2**: 语音识别集成
  - 语音转文字
  - 实时识别
  - 识别结果校对
  - **预计时间**: 1.5天

---

### Phase 7: 个人中心模块 (Week 6)

#### 7.1 个人信息
- [ ] **任务 7.1.1**: 个人资料页面
  - ✅ 基础 UI 已完成
  - 资料展示
  - 资料编辑
  - 头像上传
  - **预计时间**: 1.5天

- [ ] **任务 7.1.2**: 账号设置
  - 修改密码
  - 绑定邮箱/手机
  - 注销账号
  - **预计时间**: 1.5天

#### 7.2 学习数据
- [ ] **任务 7.2.1**: 学习统计页面
  - 学习时长统计
  - 练习题数统计
  - 知识点掌握度
  - **预计时间**: 2天

- [ ] **任务 7.2.2**: 数据可视化
  - 图表组件
  - 趋势分析
  - 对比展示
  - **预计时间**: 2天

- [ ] **任务 7.2.3**: 学习排行榜
  - 排行榜展示
  - 好友对比
  - 成就系统
  - **预计时间**: 1.5天

#### 7.3 收藏和错题
- [ ] **任务 7.3.1**: 收藏管理
  - 收藏列表
  - 分类管理
  - 批量操作
  - **预计时间**: 1.5天

- [ ] **任务 7.3.2**: 错题本管理
  - 错题列表
  - 按知识点分类
  - 重做功能
  - **预计时间**: 1.5天

- [ ] **任务 7.3.3**: 数据导出
  - PDF 导出
  - 分享功能
  - 打印支持
  - **预计时间**: 1.5天

---

### Phase 8: 高级功能 (Week 6)

#### 8.1 离线功能
- [ ] **任务 8.1.1**: 离线数据缓存
  - 题目缓存策略
  - 知识点缓存
  - 缓存更新机制
  - **预计时间**: 2天

- [ ] **任务 8.1.2**: 离线练习模式
  - 离线答题
  - 本地记录保存
  - 联网后同步
  - **预计时间**: 1.5天

#### 8.2 通知推送
- [ ] **任务 8.2.1**: 推送服务集成
  - APNs 配置
  - 推送权限申请
  - 设备 Token 管理
  - **预计时间**: 1天

- [ ] **任务 8.2.2**: 推送类型实现
  - 学习提醒
  - AI 回复通知
  - 系统消息
  - **预计时间**: 1.5天

#### 8.3 性能优化
- [ ] **任务 8.3.1**: 启动时间优化
  - 延迟加载
  - 预加载策略
  - 启动流程优化
  - **预计时间**: 1天

- [ ] **任务 8.3.2**: 内存优化
  - 图片缓存优化
  - 内存泄漏检测
  - 大数据处理优化
  - **预计时间**: 1.5天

- [ ] **任务 8.3.3**: 网络优化
  - 请求合并
  - 数据压缩
  - 智能重试
  - **预计时间**: 1day

---

## 🧪 测试计划

### 单元测试 (贯穿开发过程)
- [ ] Repository 层测试覆盖率 > 80%
- [ ] UseCase 层测试覆盖率 > 80%
- [ ] ViewModel 层测试覆盖率 > 70%

### UI 测试 (Week 6)
- [ ] 主要用户流程自动化测试
- [ ] 关键页面截图对比测试
- [ ] 可访问性测试

### 性能测试 (Week 6)
- [ ] 启动时间 < 2秒
- [ ] 页面切换流畅度 > 60fps
- [ ] 内存占用 < 150MB

### 兼容性测试 (Week 6)
- [ ] iOS 15.0+ 兼容性
- [ ] iPhone SE - iPhone 16 Pro Max 适配
- [ ] iPad 适配

---

## 📦 技术栈

### 核心框架
- **SwiftUI**: UI 框架
- **Combine**: 响应式编程
- **Swift Concurrency**: async/await

### 网络层
- **Alamofire**: HTTP 网络库
- **WebSocket**: 实时通信

### 数据层
- **Realm**: 本地数据库
- **KeychainAccess**: 安全存储
- **UserDefaults**: 配置管理

### 依赖注入
- **Swinject**: DI 容器

### 图片处理
- **Nuke**: 图片加载和缓存
- **Kingfisher** (可选): 备选方案

### 其他
- **swift-log**: 日志记录
- **Charts** (可选): 数据可视化

---

## 📂 项目结构

```
BBLearning/
├── App/
│   ├── BBLearningApp.swift       # App 入口
│   └── AppDelegate.swift         # App 生命周期
├── Core/
│   ├── DI/                       # 依赖注入
│   ├── Network/                  # 网络层
│   ├── Storage/                  # 存储层
│   └── Utils/                    # 工具类
├── Data/
│   ├── DTOs/                     # 数据传输对象
│   ├── Local/                    # 本地数据源
│   ├── Remote/                   # 远程数据源
│   └── Repositories/             # Repository 实现
├── Domain/
│   ├── Entities/                 # 领域实体
│   ├── Repositories/             # Repository 协议
│   └── UseCases/                 # 用例
├── Presentation/
│   ├── Components/               # 可复用组件
│   ├── ViewModels/               # ViewModel
│   └── Views/                    # 视图
│       ├── Auth/                 # 认证模块
│       ├── Home/                 # 首页模块
│       ├── Knowledge/            # 知识点模块
│       ├── Practice/             # 练习模块
│       ├── AITutor/              # AI 辅导模块
│       └── Profile/              # 个人中心模块
├── Resources/
│   ├── Assets.xcassets           # 资源文件
│   ├── Fonts/                    # 字体
│   └── Localizations/            # 本地化
└── Tests/
    ├── UnitTests/                # 单元测试
    ├── IntegrationTests/         # 集成测试
    └── UITests/                  # UI 测试
```

---

## 🎯 里程碑

| 里程碑 | 完成日期 | 交付内容 |
|--------|----------|----------|
| M1: 基础设施完成 | Week 2 | 网络层、数据层、DI 容器 |
| M2: 用户认证完成 | Week 2 | 登录、注册、密码管理 |
| M3: 核心功能完成 | Week 4 | 首页、知识点、练习基础功能 |
| M4: AI 功能完成 | Week 5 | AI 聊天、拍照识题、语音交互 |
| M5: 完整功能 | Week 6 | 个人中心、高级功能、优化 |
| M6: 测试完成 | Week 6 | 所有测试通过，准备发布 |

---

## 📊 进度跟踪

### 当前状态
- ✅ UI 设计框架已完成
- ✅ 登录界面完成
- ✅ 主要Tab页面结构完成
- ⏳ API 集成待开始
- ⏳ 数据持久化待开始

### 完成度统计
- **总体进度**: 5% (UI 框架)
- **Phase 1**: 0%
- **Phase 2**: 10% (UI 完成)
- **Phase 3**: 10% (UI 完成)
- **Phase 4**: 10% (UI 完成)
- **Phase 5**: 10% (UI 完成)
- **Phase 6**: 10% (UI 完成)
- **Phase 7**: 10% (UI 完成)
- **Phase 8**: 0%

---

## 🚀 快速开始

### 环境要求
- Xcode 15.0+
- iOS 15.0+
- Swift 5.9+
- CocoaPods / SPM

### 安装依赖
```bash
cd ios/BBLearning
# 使用 Swift Package Manager
open Package.swift
# Xcode 会自动解析依赖
```

### 运行项目
```bash
# 打开项目
open BBLearningApp.xcodeproj

# 或使用命令行构建
xcodebuild -project BBLearningApp.xcodeproj \
  -scheme BBLearningApp \
  -destination 'platform=iOS Simulator,name=iPhone 16 Pro' \
  build
```

---

## 📝 开发规范

### 代码规范
- 遵循 Swift API 设计指南
- 使用 SwiftLint 进行代码检查
- 函数单一职责原则
- 命名清晰、有意义

### Git 工作流
- 主分支: `main`
- 开发分支: `develop`
- 功能分支: `feature/xxx`
- 修复分支: `fix/xxx`
- 发布分支: `release/x.x.x`

### Commit 规范
```
feat: 新功能
fix: 修复 bug
docs: 文档更新
style: 代码格式调整
refactor: 重构
test: 测试相关
chore: 构建/工具相关
```

---

## 🐛 已知问题

1. ~~暂无~~

---

## 📅 每周检查点

### Week 1
- [ ] 项目结构搭建完成
- [ ] 网络层基础实现
- [ ] 数据库集成完成

### Week 2
- [ ] 用户认证功能完成
- [ ] 首页数据接口对接
- [ ] 知识点列表实现

### Week 3
- [ ] 知识点详情完成
- [ ] 练习模式实现
- [ ] 答题界面完成

### Week 4
- [ ] 练习结果页面完成
- [ ] 错题本功能实现
- [ ] AI 聊天基础功能

### Week 5
- [ ] AI 完整功能实现
- [ ] 拍照识题完成
- [ ] 语音交互完成

### Week 6
- [ ] 个人中心完成
- [ ] 性能优化完成
- [ ] 所有测试通过

---

## 👥 团队分工 (建议)

### iOS 开发 (2-3人)
- **开发工程师 A**: 网络层、数据层、认证模块
- **开发工程师 B**: 知识点模块、练习模块
- **开发工程师 C**: AI 模块、个人中心、优化

### 后端支持 (1人)
- API 接口调试
- 数据结构对接
- 性能优化配合

### UI/UX (0.5人)
- UI 细节优化
- 交互体验改进
- 视觉资源准备

### 测试 (1人)
- 功能测试
- 性能测试
- 兼容性测试

---

## 📞 联系方式

- **项目负责人**: TBD
- **技术负责人**: TBD
- **问题反馈**: GitHub Issues
- **文档**: 项目 Wiki

---

## 📖 参考资料

- [SwiftUI 官方文档](https://developer.apple.com/documentation/swiftui)
- [Alamofire 文档](https://github.com/Alamofire/Alamofire)
- [Realm Swift 文档](https://www.mongodb.com/docs/realm/sdk/swift/)
- [iOS 开发规范](https://github.com/raywenderlich/swift-style-guide)

---

**最后更新**: 2025-10-15  
**版本**: v1.0  
**状态**: 📋 计划中
